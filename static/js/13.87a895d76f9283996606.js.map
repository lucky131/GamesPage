{"version":3,"sources":["webpack:///src/components/minesweeper/minesweeper.vue","webpack:///./src/components/minesweeper/minesweeper.vue?c87f","webpack:///./src/components/minesweeper/minesweeper.vue"],"names":["__webpack_exports__","name","data","falseData","isDialogShow","config","blockSize","difficulty","width","height","mines","blocks","isGenerate","flagNumber","startTime","mounted","methods","start","_this","this","$alert","Date","$","css","i","j","push","index","row","col","mine","number","open","flag","$nextTick","generate","safeIndex","that","_i","Math","floor","random","_i2","_some","_j","_index","click","quickOpen","_this2","isWin","diff","getTime","callback","some","result","watch","config.difficulty","val","oldVal","minesweeper_minesweeper","render","_vm","_h","$createElement","_c","_self","attrs","id","_l","item","key","staticClass","on","$event","_k","keyCode","button","contextmenu","_v","_s","title","center","visible","show-close","close-on-click-modal","close-on-press-escape","update:visible","label-width","label","min","step","model","value","$$v","$set","expression","disabled","slot","type","staticRenderFns","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","minesweeper"],"mappings":"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","file":"static/js/13.87a895d76f9283996606.js","sourcesContent":["<template>\r\n  <div id=\"content\">\r\n    <div id=\"minefield\">\r\n      <div class=\"block\" v-for=\"item in blocks\" :key=\"item.index\" :index=\"item.index\"\r\n           @click.left=\"click(item.index, item.row, item.col)\"\r\n           @click.right=\"flag(item.index, item.row, item.col)\">\r\n        <div class=\"innerBlock flagBlock\" v-if=\"item.flag\"><i class=\"el-icon-location-outline\"></i></div>\r\n        <div class=\"innerBlock closeBlock\" v-else-if=\"!item.open\"></div>\r\n        <div class=\"innerBlock mineBlock\" v-else-if=\"item.mine==1\"><i class=\"el-icon-close\"></i></div>\r\n        <div class=\"innerBlock\" v-else>{{item.number==0 ? '' : item.number}}</div>\r\n      </div>\r\n    </div>\r\n    <div>{{flagNumber}} / {{config.mines}}</div>\r\n    <el-dialog\r\n      title=\"新游戏\"\r\n      center\r\n      :visible.sync=\"isDialogShow\"\r\n      width=\"500px\"\r\n      :show-close=\"falseData\"\r\n      :close-on-click-modal=\"falseData\"\r\n      :close-on-press-escape=\"falseData\">\r\n      <el-form label-width=\"80px\">\r\n        <el-form-item label=\"格子大小\">\r\n          <el-input-number v-model=\"config.blockSize\" :min=\"10\" :step=\"5\"></el-input-number>\r\n        </el-form-item>\r\n        <el-form-item label=\"难度\">\r\n          <el-radio-group v-model=\"config.difficulty\">\r\n            <el-radio :label=\"1\">简单</el-radio>\r\n            <el-radio :label=\"2\">中等</el-radio>\r\n            <el-radio :label=\"3\">困难</el-radio>\r\n            <el-radio :label=\"4\">自定义</el-radio>\r\n          </el-radio-group>\r\n          <div>\r\n            <div class=\"dialogRow\">\r\n              <span class=\"dialogRowLabel\">宽</span><el-input-number :disabled=\"config.difficulty!==4\" v-model=\"config.width\" :min=\"10\"></el-input-number>\r\n            </div>\r\n            <div class=\"dialogRow\">\r\n              <span class=\"dialogRowLabel\">高</span><el-input-number :disabled=\"config.difficulty!==4\" v-model=\"config.height\" :min=\"10\"></el-input-number>\r\n            </div>\r\n            <div class=\"dialogRow\">\r\n              <span class=\"dialogRowLabel\">雷</span><el-input-number :disabled=\"config.difficulty!==4\" v-model=\"config.mines\" :min=\"1\"></el-input-number>\r\n            </div>\r\n          </div>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"\">\r\n        <el-button type=\"primary\" @click=\"start()\">开始</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"scss\">\r\n  #content{\r\n    width: 100vw;\r\n    height: 100vh;\r\n    display: flex;\r\n    flex-flow: column nowrap;\r\n    align-items: center;\r\n    justify-content: center;\r\n    #minefield{\r\n      border-bottom: 1px solid black;\r\n      border-right: 1px solid black;\r\n      display: flex;\r\n      flex-flow: row wrap;\r\n      .block{\r\n        text-align: center;\r\n        border-top: 1px solid black;\r\n        border-left: 1px solid black;\r\n        box-sizing: border-box;\r\n        cursor: default;\r\n        .innerBlock{\r\n          width: 100%;\r\n          height: 100%;\r\n          font-size: 20px;\r\n        }\r\n        .flagBlock{\r\n          background-color: #ccc;\r\n        }\r\n        .closeBlock{\r\n          background-color: #ccc;\r\n        }\r\n        .mineBlock{\r\n          color: red;\r\n        }\r\n      }\r\n    }\r\n    .el-form-item /deep/ .el-form-item__label{\r\n      padding-right: 20px;\r\n    }\r\n    .dialogRow{\r\n      margin: 10px 0;\r\n      .dialogRowLabel{\r\n        margin-right: 20px;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n\r\n<script>\r\n  export default {\r\n    name: 'minesweeper',\r\n    data () {\r\n      return {\r\n        falseData: false,\r\n        isDialogShow: true,\r\n        config: {\r\n          blockSize: 40,\r\n          difficulty: 1,\r\n          width: 10,\r\n          height: 10,\r\n          mines: 10\r\n        },\r\n        blocks: [],\r\n        isGenerate: false,\r\n        flagNumber: 0,\r\n        startTime: null,\r\n      }\r\n    },\r\n    mounted: function () {\r\n      let that = this;\r\n    },\r\n    methods: {\r\n      start(){\r\n        if(this.config.mines > this.config.width * this.config.height / 2){\r\n          this.$alert(\"雷密度不能超过50%\");\r\n          return;\r\n        }\r\n\r\n        this.isDialogShow = false;\r\n        this.isGenerate = false;\r\n        this.flagNumber = 0;\r\n        this.startTime = new Date();\r\n\r\n        //调整雷区的宽高\r\n        $(\"#minefield\").css(\"width\", this.config.width * this.config.blockSize + \"px\")\r\n          .css(\"height\", this.config.height * this.config.blockSize + \"px\");\r\n\r\n        //生成blocks\r\n        this.blocks = [];\r\n        for(let i=0;i<this.config.height;i++){\r\n          for(let j=0;j<this.config.width;j++){\r\n            this.blocks.push({\r\n              index: i*this.config.width+j,\r\n              row: i,\r\n              col: j,\r\n              mine: 0,\r\n              number: 0,\r\n              open: false,\r\n              flag: false,\r\n            });\r\n          }\r\n        }\r\n\r\n        this.$nextTick(() => {\r\n          $(\".block\").css(\"width\", this.config.blockSize + \"px\")\r\n            .css(\"height\", this.config.blockSize + \"px\")\r\n            .css(\"line-height\", this.config.blockSize + \"px\");\r\n        });\r\n      },\r\n      generate(safeIndex){\r\n        let that = this;\r\n        do{\r\n          //清空雷区\r\n          this.blocks = [];\r\n          for(let i=0;i<this.config.height;i++){\r\n            for(let j=0;j<this.config.width;j++){\r\n              this.blocks.push({\r\n                index: i*this.config.width+j,\r\n                row: i,\r\n                col: j,\r\n                mine: 0,\r\n                number: 0,\r\n                open: false,\r\n                flag: false,\r\n              });\r\n            }\r\n          }\r\n\r\n          //布雷\r\n          for(let i=0;i<this.config.mines;i++){\r\n            let index = 0;\r\n            do{\r\n              index = Math.floor(Math.random()*this.config.width*this.config.height);\r\n            } while (this.blocks[index].mine==1);\r\n            this.blocks[index].mine = 1;\r\n          }\r\n\r\n          //计算number\r\n          for(let i=0;i<this.config.height;i++){\r\n            for(let j=0;j<this.config.width;j++){\r\n              let index = i*this.config.width+j;\r\n              if(this.blocks[index].mine==0){\r\n                this.blocks[index].number +=\r\n                  some(i, j-1)\r\n                  + some(i, j+1)\r\n                  + some(i-1, j-1)\r\n                  + some(i-1, j)\r\n                  + some(i-1, j+1)\r\n                  + some(i+1, j-1)\r\n                  + some(i+1, j)\r\n                  + some(i+1, j+1);\r\n              }\r\n            }\r\n            function some(i, j) {\r\n              if(i < 0 || i > that.config.height -1) return 0;\r\n              if(j < 0 || j > that.config.width -1) return 0;\r\n              return that.blocks[i*that.config.width+j].mine;\r\n            }\r\n          }\r\n        } while(this.blocks[safeIndex].number!=0 || this.blocks[safeIndex].mine!=0);\r\n      },\r\n      click(index, row, col){\r\n        if(!this.isGenerate){\r\n          //第一次点击，再布雷，保证第一次点开是0\r\n          this.generate(index);\r\n          this.isGenerate = true;\r\n          this.click(index, row, col);\r\n        } else {\r\n          if(!this.blocks[index].flag){\r\n            if(!this.blocks[index].open){\r\n              //如果没打开，则打开\r\n              this.open(row, col);\r\n            } else {\r\n              //如果已经打开，执行快速打开\r\n              this.quickOpen(row, col);\r\n            }\r\n          }\r\n        }\r\n      },\r\n      open(i, j){\r\n        let index = i*this.config.width+j;\r\n        if(i < 0 || i > this.config.height -1) return 0;\r\n        if(j < 0 || j > this.config.width -1) return 0;\r\n        if(this.blocks[index].flag)\r\n          return;\r\n        if(this.blocks[index].open)\r\n          return;\r\n        if(this.blocks[index].mine>0){\r\n          this.$alert(\"GG\");\r\n        } else {\r\n          this.blocks[index].open = true;\r\n          if(this.blocks[index].number==0){\r\n            this.open(i, j-1);\r\n            this.open(i, j+1);\r\n            this.open(i-1, j-1);\r\n            this.open(i-1, j);\r\n            this.open(i-1, j+1);\r\n            this.open(i+1, j-1);\r\n            this.open(i+1, j);\r\n            this.open(i+1, j+1);\r\n          }\r\n          if(this.isWin()){\r\n            let endTime = new Date();\r\n            let diff = (endTime.getTime() - this.startTime.getTime()) / 1000;\r\n            this.$alert(\"Win! Your score: \" + diff + \" s\", {\r\n              callback: () => {\r\n                this.isDialogShow = true;\r\n              }\r\n            });\r\n          }\r\n        }\r\n      },\r\n      quickOpen(i, j){\r\n        let that = this;\r\n        let index = i*this.config.width+j;\r\n        let number = this.blocks[index].number;\r\n        let flagNumber = 0;\r\n        flagNumber +=\r\n          some(i, j-1)\r\n          + some(i, j+1)\r\n          + some(i-1, j-1)\r\n          + some(i-1, j)\r\n          + some(i-1, j+1)\r\n          + some(i+1, j-1)\r\n          + some(i+1, j)\r\n          + some(i+1, j+1);\r\n        if(number == flagNumber){\r\n          //如果两个数相等，则等价于打开周围8块\r\n          this.open(i, j-1);\r\n          this.open(i, j+1);\r\n          this.open(i-1, j-1);\r\n          this.open(i-1, j);\r\n          this.open(i-1, j+1);\r\n          this.open(i+1, j-1);\r\n          this.open(i+1, j);\r\n          this.open(i+1, j+1);\r\n        }\r\n        function some(i, j) {\r\n          if(i < 0 || i > that.config.height -1) return 0;\r\n          if(j < 0 || j > that.config.width -1) return 0;\r\n          return that.blocks[i*that.config.width+j].flag ? 1 : 0;\r\n        }\r\n      },\r\n      isWin(){\r\n        let result = true;\r\n        for(let index in this.blocks){\r\n          if(this.blocks[index].mine==0 && !this.blocks[index].open){\r\n            result = false;\r\n            break;\r\n          }\r\n        }\r\n        return result;\r\n      },\r\n      flag(index, row, col){\r\n        if(this.isGenerate && !this.blocks[index].open){\r\n          this.flagNumber += this.blocks[index].flag ? -1 : 1;\r\n          this.blocks[index].flag = !this.blocks[index].flag;\r\n        }\r\n      }\r\n    },\r\n    watch: {\r\n      \"config.difficulty\": function (val, oldVal) {\r\n        if(val===1){\r\n          this.config.width=10;\r\n          this.config.height=10;\r\n          this.config.mines=10;\r\n        } else if(val===2){\r\n          this.config.width=16;\r\n          this.config.height=16;\r\n          this.config.mines=40;\r\n        } else if(val===3){\r\n          this.config.width=30;\r\n          this.config.height=16;\r\n          this.config.mines=99;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/minesweeper/minesweeper.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"content\"}},[_c('div',{attrs:{\"id\":\"minefield\"}},_vm._l((_vm.blocks),function(item){return _c('div',{key:item.index,staticClass:\"block\",attrs:{\"index\":item.index},on:{\"click\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"left\",37,$event.key,[\"Left\",\"ArrowLeft\"])){ return null; }if('button' in $event && $event.button !== 0){ return null; }_vm.click(item.index, item.row, item.col)},\"contextmenu\":function($event){_vm.flag(item.index, item.row, item.col)}}},[(item.flag)?_c('div',{staticClass:\"innerBlock flagBlock\"},[_c('i',{staticClass:\"el-icon-location-outline\"})]):(!item.open)?_c('div',{staticClass:\"innerBlock closeBlock\"}):(item.mine==1)?_c('div',{staticClass:\"innerBlock mineBlock\"},[_c('i',{staticClass:\"el-icon-close\"})]):_c('div',{staticClass:\"innerBlock\"},[_vm._v(_vm._s(item.number==0 ? '' : item.number))])])})),_vm._v(\" \"),_c('div',[_vm._v(_vm._s(_vm.flagNumber)+\" / \"+_vm._s(_vm.config.mines))]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"新游戏\",\"center\":\"\",\"visible\":_vm.isDialogShow,\"width\":\"500px\",\"show-close\":_vm.falseData,\"close-on-click-modal\":_vm.falseData,\"close-on-press-escape\":_vm.falseData},on:{\"update:visible\":function($event){_vm.isDialogShow=$event}}},[_c('el-form',{attrs:{\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"格子大小\"}},[_c('el-input-number',{attrs:{\"min\":10,\"step\":5},model:{value:(_vm.config.blockSize),callback:function ($$v) {_vm.$set(_vm.config, \"blockSize\", $$v)},expression:\"config.blockSize\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"难度\"}},[_c('el-radio-group',{model:{value:(_vm.config.difficulty),callback:function ($$v) {_vm.$set(_vm.config, \"difficulty\", $$v)},expression:\"config.difficulty\"}},[_c('el-radio',{attrs:{\"label\":1}},[_vm._v(\"简单\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":2}},[_vm._v(\"中等\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":3}},[_vm._v(\"困难\")]),_vm._v(\" \"),_c('el-radio',{attrs:{\"label\":4}},[_vm._v(\"自定义\")])],1),_vm._v(\" \"),_c('div',[_c('div',{staticClass:\"dialogRow\"},[_c('span',{staticClass:\"dialogRowLabel\"},[_vm._v(\"宽\")]),_c('el-input-number',{attrs:{\"disabled\":_vm.config.difficulty!==4,\"min\":10},model:{value:(_vm.config.width),callback:function ($$v) {_vm.$set(_vm.config, \"width\", $$v)},expression:\"config.width\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"dialogRow\"},[_c('span',{staticClass:\"dialogRowLabel\"},[_vm._v(\"高\")]),_c('el-input-number',{attrs:{\"disabled\":_vm.config.difficulty!==4,\"min\":10},model:{value:(_vm.config.height),callback:function ($$v) {_vm.$set(_vm.config, \"height\", $$v)},expression:\"config.height\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"dialogRow\"},[_c('span',{staticClass:\"dialogRowLabel\"},[_vm._v(\"雷\")]),_c('el-input-number',{attrs:{\"disabled\":_vm.config.difficulty!==4,\"min\":1},model:{value:(_vm.config.mines),callback:function ($$v) {_vm.$set(_vm.config, \"mines\", $$v)},expression:\"config.mines\"}})],1)])],1)],1),_vm._v(\" \"),_c('span',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.start()}}},[_vm._v(\"开始\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-3dc66bde\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.2@vue-loader/lib/selector.js?type=template&index=0!./src/components/minesweeper/minesweeper.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3dc66bde\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=styles&index=0!./minesweeper.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./minesweeper.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=script&index=0!./minesweeper.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3dc66bde\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.2@vue-loader/lib/selector?type=template&index=0!./minesweeper.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3dc66bde\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/minesweeper/minesweeper.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}
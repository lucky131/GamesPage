webpackJsonp([9],{AV0y:function(i,t,e){"use strict";(function(i){t.a={name:"minesweeper",data:function(){return{falseData:!1,isDialogShow:!0,config:{blockSize:40,difficulty:1,width:10,height:10,mines:10},blocks:[],isGenerate:!1,flagNumber:0,startTime:null}},mounted:function(){},methods:{start:function(){var t=this;if(this.config.mines>this.config.width*this.config.height/2)this.$alert("雷密度不能超过50%");else{this.isDialogShow=!1,this.isGenerate=!1,this.flagNumber=0,this.startTime=new Date,i("#minefield").css("width",this.config.width*this.config.blockSize+"px").css("height",this.config.height*this.config.blockSize+"px"),this.blocks=[];for(var e=0;e<this.config.height;e++)for(var s=0;s<this.config.width;s++)this.blocks.push({index:e*this.config.width+s,row:e,col:s,mine:0,number:0,open:!1,flag:!1});this.$nextTick(function(){i(".block").css("width",t.config.blockSize+"px").css("height",t.config.blockSize+"px").css("line-height",t.config.blockSize+"px")})}},generate:function(i){var t=this;do{this.blocks=[];for(var e=0;e<this.config.height;e++)for(var s=0;s<this.config.width;s++)this.blocks.push({index:e*this.config.width+s,row:e,col:s,mine:0,number:0,open:!1,flag:!1});for(var n=0;n<this.config.mines;n++){var o=0;do{o=Math.floor(Math.random()*this.config.width*this.config.height)}while(1==this.blocks[o].mine);this.blocks[o].mine=1}for(var c=0;c<this.config.height;c++)for(var l=function(i,e){return i<0||i>t.config.height-1?0:e<0||e>t.config.width-1?0:t.blocks[i*t.config.width+e].mine},a=0;a<this.config.width;a++){var h=c*this.config.width+a;0==this.blocks[h].mine&&(this.blocks[h].number+=l(c,a-1)+l(c,a+1)+l(c-1,a-1)+l(c-1,a)+l(c-1,a+1)+l(c+1,a-1)+l(c+1,a)+l(c+1,a+1))}}while(0!=this.blocks[i].number||0!=this.blocks[i].mine)},click:function(i,t,e){this.isGenerate?this.blocks[i].flag||(this.blocks[i].open?this.quickOpen(t,e):this.open(t,e)):(this.generate(i),this.isGenerate=!0,this.click(i,t,e))},open:function(i,t){var e=this,s=i*this.config.width+t;if(i<0||i>this.config.height-1)return 0;if(t<0||t>this.config.width-1)return 0;if(!this.blocks[s].flag&&!this.blocks[s].open)if(this.blocks[s].mine>0)this.$alert("GG");else if(this.blocks[s].open=!0,0==this.blocks[s].number&&(this.open(i,t-1),this.open(i,t+1),this.open(i-1,t-1),this.open(i-1,t),this.open(i-1,t+1),this.open(i+1,t-1),this.open(i+1,t),this.open(i+1,t+1)),this.isWin()){var n=((new Date).getTime()-this.startTime.getTime())/1e3;this.$alert("Win! Your score: "+n+" s",{callback:function(){e.isDialogShow=!0}})}},quickOpen:function(i,t){var e=this,s=i*this.config.width+t,n=0;function o(i,t){return i<0||i>e.config.height-1?0:t<0||t>e.config.width-1?0:e.blocks[i*e.config.width+t].flag?1:0}this.blocks[s].number==(n+=o(i,t-1)+o(i,t+1)+o(i-1,t-1)+o(i-1,t)+o(i-1,t+1)+o(i+1,t-1)+o(i+1,t)+o(i+1,t+1))&&(this.open(i,t-1),this.open(i,t+1),this.open(i-1,t-1),this.open(i-1,t),this.open(i-1,t+1),this.open(i+1,t-1),this.open(i+1,t),this.open(i+1,t+1))},isWin:function(){var i=!0;for(var t in this.blocks)if(0==this.blocks[t].mine&&!this.blocks[t].open){i=!1;break}return i},flag:function(i,t,e){this.isGenerate&&!this.blocks[i].open&&(this.flagNumber+=this.blocks[i].flag?-1:1,this.blocks[i].flag=!this.blocks[i].flag)}},watch:{"config.difficulty":function(i,t){1===i?(this.config.width=10,this.config.height=10,this.config.mines=10):2===i?(this.config.width=16,this.config.height=16,this.config.mines=40):3===i&&(this.config.width=30,this.config.height=16,this.config.mines=99)}}}}).call(t,e("L7Pj"))},"EV+5":function(i,t){},NAzr:function(i,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("AV0y"),n={render:function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{attrs:{id:"content"}},[e("div",{attrs:{id:"minefield"}},i._l(i.blocks,function(t){return e("div",{key:t.index,staticClass:"block",attrs:{index:t.index},on:{click:function(e){return"button"in e||!i._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?"button"in e&&0!==e.button?null:void i.click(t.index,t.row,t.col):null},contextmenu:function(e){i.flag(t.index,t.row,t.col)}}},[t.flag?e("div",{staticClass:"innerBlock flagBlock"},[e("i",{staticClass:"el-icon-location-outline"})]):t.open?1==t.mine?e("div",{staticClass:"innerBlock mineBlock"},[e("i",{staticClass:"el-icon-close"})]):e("div",{staticClass:"innerBlock"},[i._v(i._s(0==t.number?"":t.number))]):e("div",{staticClass:"innerBlock closeBlock"})])})),i._v(" "),e("div",[i._v(i._s(i.flagNumber)+" / "+i._s(i.config.mines))]),i._v(" "),e("el-dialog",{attrs:{title:"新游戏",center:"",visible:i.isDialogShow,width:"500px","show-close":i.falseData,"close-on-click-modal":i.falseData,"close-on-press-escape":i.falseData},on:{"update:visible":function(t){i.isDialogShow=t}}},[e("el-form",{attrs:{"label-width":"80px"}},[e("el-form-item",{attrs:{label:"格子大小"}},[e("el-input-number",{attrs:{min:10,step:5},model:{value:i.config.blockSize,callback:function(t){i.$set(i.config,"blockSize",t)},expression:"config.blockSize"}})],1),i._v(" "),e("el-form-item",{attrs:{label:"难度"}},[e("el-radio-group",{model:{value:i.config.difficulty,callback:function(t){i.$set(i.config,"difficulty",t)},expression:"config.difficulty"}},[e("el-radio",{attrs:{label:1}},[i._v("简单")]),i._v(" "),e("el-radio",{attrs:{label:2}},[i._v("中等")]),i._v(" "),e("el-radio",{attrs:{label:3}},[i._v("困难")]),i._v(" "),e("el-radio",{attrs:{label:4}},[i._v("自定义")])],1),i._v(" "),e("div",[e("div",{staticClass:"dialogRow"},[e("span",{staticClass:"dialogRowLabel"},[i._v("宽")]),e("el-input-number",{attrs:{disabled:4!==i.config.difficulty,min:10},model:{value:i.config.width,callback:function(t){i.$set(i.config,"width",t)},expression:"config.width"}})],1),i._v(" "),e("div",{staticClass:"dialogRow"},[e("span",{staticClass:"dialogRowLabel"},[i._v("高")]),e("el-input-number",{attrs:{disabled:4!==i.config.difficulty,min:10},model:{value:i.config.height,callback:function(t){i.$set(i.config,"height",t)},expression:"config.height"}})],1),i._v(" "),e("div",{staticClass:"dialogRow"},[e("span",{staticClass:"dialogRowLabel"},[i._v("雷")]),e("el-input-number",{attrs:{disabled:4!==i.config.difficulty,min:1},model:{value:i.config.mines,callback:function(t){i.$set(i.config,"mines",t)},expression:"config.mines"}})],1)])],1)],1),i._v(" "),e("span",{attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(t){i.start()}}},[i._v("开始")])],1)],1)],1)},staticRenderFns:[]};var o=function(i){e("EV+5")},c=e("vSla")(s.a,n,!1,o,"data-v-3dc66bde",null);t.default=c.exports}});
//# sourceMappingURL=9.3e8e752bc140f5b620ed.js.map